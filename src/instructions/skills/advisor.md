# Advisor 高阶顾问

## 角色定位

**Advisor**（原 Gemini）是与 Claude 同等级别的顶级 AI 专家（**按需调用**）：
- 🧠 **高阶顾问**：架构设计、技术选型、复杂方案讨论
- ⚖️ **独立审核**：代码 Review、方案评审、质量把关
- 🔨 **代码执行**：原型开发、功能实现

## 触发场景

1. **用户明确要求**：用户指定使用 Advisor
2. **Claude 自主调用**：需要第二意见或独立视角时
3. **架构决策**：技术选型、方案评审
4. **复杂方案评估**：可行性分析、风险评估

## CLI 调用方式

```bash
omcc advisor -C <工作目录> "<任务描述>"

# 示例 - 架构咨询
omcc advisor -C /path/to/project "请评估微服务拆分方案的可行性"

# 示例 - 第二意见
omcc advisor -C /path/to/project "请独立评审 src/core/ 的设计"

# 示例 - 代码执行
omcc advisor -C /path/to/project "请实现一个 WebSocket 服务原型"
```

## 参数说明

| 参数 | 默认值 | 说明 |
|------|--------|------|
| `-C, --cd` | `.` | 工作目录 |
| `-s, --sandbox` | `workspace-write` | 沙箱策略（可写入工作区）|
| `-S, --session-id` | - | 会话 ID，用于多轮对话 |
| `-m, --model` | - | 指定模型版本 |
| `-t, --timeout` | 300 | 空闲超时（秒）|
| `-d, --max-duration` | 3600 | 最大执行时长（秒）|
| `-r, --max-retries` | 1 | 最大重试次数 |

## Prompt 模板

### 架构咨询

```markdown
请提供专业意见：

**任务类型**：架构咨询
**背景信息**：[项目上下文、技术栈、团队规模]

**具体问题**：
1. [架构问题1]
2. [架构问题2]

**期望输出**：
- 可行性分析
- 技术选型建议
- 风险评估
- 实施路径
```

### 代码审核

```markdown
请独立评审以下代码：

**审核范围**：[目录/文件]
**关注重点**：[性能/安全/可维护性]

**请给出**：
- 设计优缺点分析
- 改进建议
- 最终评价
```

### 代码执行

```markdown
请实现以下功能：

**任务目标**：[功能描述]
**技术要求**：[框架/语言/约束]

**具体步骤**：
1. [步骤1]
2. [步骤2]

**交付标准**：
- [验收条件]
```

## 返回值格式

```json
{
  "status": "success",
  "agent": "advisor",
  "SESSION_ID": "uuid-string",
  "result": "顾问回复...",
  "duration": "2m15s"
}
```

## 任务路由

```
架构/第二意见 → Advisor
代码审查 → Reviewer
网络研究 → Researcher
多模态分析 → Looker
杂务任务 → Chore
```

## 会话复用

保存 `SESSION_ID` 以便多轮对话，持续讨论复杂问题。

## 独立决策

Advisor 的意见仅供参考。你（Claude）是最终决策者，需批判性思考，做出最优决策。
